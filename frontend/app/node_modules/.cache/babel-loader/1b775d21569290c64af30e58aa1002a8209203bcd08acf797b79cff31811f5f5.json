{"ast":null,"code":"const API_URL='http://172.20.10.4:8000/api';const UserService={signIn:async data=>{try{const response=await fetch(\"\".concat(API_URL,\"/signIn\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});if(response.ok){const result=await response.json();console.log('Sign In success:',result);}else{console.error('Sign In failed:',response.statusText);}}catch(error){console.error('Error during Sign In:',error.message);}},logIn:async data=>{try{const response=await fetch(\"\".concat(API_URL,\"/logIn\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});if(response.ok){const result=await response.json();console.log(result.user);sessionStorage.setItem('User',JSON.stringify(result.user));UserService.triggerAuthChange();window.location.reload();return result.user;}else{console.error('Login failed:',response.statusText);}}catch(error){console.error('Error during Login:',error.message);}},logout:()=>{sessionStorage.removeItem('User');UserService.triggerAuthChange();},isLoggedIn:()=>{const user=sessionStorage.getItem('User');return!!user;},subscribeToAuthChanges(callback){window.addEventListener('authChange',()=>{callback(this.isLoggedIn());});},triggerAuthChange(){window.dispatchEvent(new Event('authChange'));}};export default UserService;","map":{"version":3,"names":["API_URL","UserService","signIn","data","response","fetch","concat","method","headers","body","JSON","stringify","ok","result","json","console","log","error","statusText","message","logIn","user","sessionStorage","setItem","triggerAuthChange","window","location","reload","logout","removeItem","isLoggedIn","getItem","subscribeToAuthChanges","callback","addEventListener","dispatchEvent","Event"],"sources":["/usr/src/app/src/services/userService.ts"],"sourcesContent":["const API_URL = 'http://172.20.10.4:8000/api';\r\n\r\ninterface SignInData {\r\n  FirstName_User: string;\r\n  LastName_User: string;\r\n  Email_User: string;\r\n  Tel_User: string;\r\n  Password_User: string;\r\n}\r\n\r\ninterface LoginData {\r\n  Email_User: string;\r\n  Password_User: string;\r\n}\r\n\r\ninterface UserService {\r\n  signIn: (data: SignInData) => Promise<void>;\r\n  logIn: (data: LoginData) => Promise<any>;\r\n  logout: () => void;\r\n  isLoggedIn: () => boolean;\r\n  subscribeToAuthChanges: (callback: (isLoggedIn: boolean) => void) => void;\r\n  triggerAuthChange: () => void;\r\n}\r\n\r\nconst UserService: UserService = {\r\n\r\n  signIn: async (data) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/signIn`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        console.log('Sign In success:', result);\r\n      } else {\r\n        console.error('Sign In failed:', response.statusText);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error during Sign In:', error.message);\r\n    }\r\n  },\r\n\r\n  logIn: async (data) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/logIn`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        console.log(result.user);\r\n        sessionStorage.setItem('User', JSON.stringify(result.user));\r\n        UserService.triggerAuthChange(); \r\n        window.location.reload();\r\n        return result.user;\r\n      } else {\r\n        console.error('Login failed:', response.statusText);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error during Login:', error.message);\r\n    }\r\n  },\r\n\r\n  logout: () => {\r\n    sessionStorage.removeItem('User'); \r\n    UserService.triggerAuthChange(); \r\n  },\r\n\r\n  isLoggedIn: () => {\r\n    const user = sessionStorage.getItem('User');\r\n    return !!user;\r\n  },\r\n\r\n\r\n  subscribeToAuthChanges(callback) {\r\n    window.addEventListener('authChange', () => {\r\n      callback(this.isLoggedIn());\r\n    });\r\n  },\r\n\r\n  triggerAuthChange() {\r\n    window.dispatchEvent(new Event('authChange'));\r\n  }\r\n};\r\n\r\nexport default UserService;\r\n"],"mappings":"AAAA,KAAM,CAAAA,OAAO,CAAG,6BAA6B,CAwB7C,KAAM,CAAAC,WAAwB,CAAG,CAE/BC,MAAM,CAAE,KAAO,CAAAC,IAAI,EAAK,CACtB,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,OAAO,YAAW,CAChDO,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAC3B,CAAC,CAAC,CAEF,GAAIC,QAAQ,CAACQ,EAAE,CAAE,CACf,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CACpCC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEH,MAAM,CAAC,CACzC,CAAC,IAAM,CACLE,OAAO,CAACE,KAAK,CAAC,iBAAiB,CAAEb,QAAQ,CAACc,UAAU,CAAC,CACvD,CACF,CAAE,MAAOD,KAAU,CAAE,CACnBF,OAAO,CAACE,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAACE,OAAO,CAAC,CACvD,CACF,CAAC,CAEDC,KAAK,CAAE,KAAO,CAAAjB,IAAI,EAAK,CACrB,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,OAAO,WAAU,CAC/CO,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAC3B,CAAC,CAAC,CAEF,GAAIC,QAAQ,CAACQ,EAAE,CAAE,CACf,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CACpCC,OAAO,CAACC,GAAG,CAACH,MAAM,CAACQ,IAAI,CAAC,CACxBC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAEb,IAAI,CAACC,SAAS,CAACE,MAAM,CAACQ,IAAI,CAAC,CAAC,CAC3DpB,WAAW,CAACuB,iBAAiB,CAAC,CAAC,CAC/BC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CACxB,MAAO,CAAAd,MAAM,CAACQ,IAAI,CACpB,CAAC,IAAM,CACLN,OAAO,CAACE,KAAK,CAAC,eAAe,CAAEb,QAAQ,CAACc,UAAU,CAAC,CACrD,CACF,CAAE,MAAOD,KAAU,CAAE,CACnBF,OAAO,CAACE,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAACE,OAAO,CAAC,CACrD,CACF,CAAC,CAEDS,MAAM,CAAEA,CAAA,GAAM,CACZN,cAAc,CAACO,UAAU,CAAC,MAAM,CAAC,CACjC5B,WAAW,CAACuB,iBAAiB,CAAC,CAAC,CACjC,CAAC,CAEDM,UAAU,CAAEA,CAAA,GAAM,CAChB,KAAM,CAAAT,IAAI,CAAGC,cAAc,CAACS,OAAO,CAAC,MAAM,CAAC,CAC3C,MAAO,CAAC,CAACV,IAAI,CACf,CAAC,CAGDW,sBAAsBA,CAACC,QAAQ,CAAE,CAC/BR,MAAM,CAACS,gBAAgB,CAAC,YAAY,CAAE,IAAM,CAC1CD,QAAQ,CAAC,IAAI,CAACH,UAAU,CAAC,CAAC,CAAC,CAC7B,CAAC,CAAC,CACJ,CAAC,CAEDN,iBAAiBA,CAAA,CAAG,CAClBC,MAAM,CAACU,aAAa,CAAC,GAAI,CAAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAC/C,CACF,CAAC,CAED,cAAe,CAAAnC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}