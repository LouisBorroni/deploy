{"ast":null,"code":"import React,{useState}from'react';import'./Header.css';import{PrimaryButton}from'../common/PrimaryButton/PrimaryButton';import{faRightToBracket}from\"@fortawesome/free-solid-svg-icons\";import LoginModal from'./LoginModal/LoginModal';import UserService from'../../services/userService';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=_ref=>{let{isLoggedIn,setIsLoggedIn,userInfo,updateUserInfo}=_ref;const[isLoginModalOpen,setIsLoginModalOpen]=useState(false);const navigate=useNavigate();const openLoginModal=()=>{setIsLoginModalOpen(true);};const closeLoginModal=()=>{setIsLoginModalOpen(false);};const handleLogout=()=>{const confirmLogout=window.confirm(\"Êtes-vous sûr de vouloir vous déconnecter ?\");if(confirmLogout){UserService.logout();UserService.triggerAuthChange();}navigate(\"/\");window.location.reload();};const handleLogin=async loginData=>{const user=await UserService.logIn(loginData);if(user){updateUserInfo(user);setIsLoggedIn(true);}};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"navbar-title\",children:\"Ressources Relationelles\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"nav-list\",children:isLoggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[userInfo&&/*#__PURE__*/_jsxs(\"li\",{className:\"user-info\",children:[\"Bonjour \",userInfo.FirstName_User,\" \",userInfo.Id_Role]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(PrimaryButton,{icon:faRightToBracket,onClick:handleLogout,children:\"Se d\\xE9connecter\"})})]}):/*#__PURE__*/_jsx(PrimaryButton,{icon:faRightToBracket,onClick:openLoginModal,children:\"Se connecter\"})}),isLoginModalOpen&&/*#__PURE__*/_jsx(LoginModal,{onClose:closeLoginModal,onLogin:handleLogin})]});};export default Navbar;","map":{"version":3,"names":["React","useState","PrimaryButton","faRightToBracket","LoginModal","UserService","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","_ref","isLoggedIn","setIsLoggedIn","userInfo","updateUserInfo","isLoginModalOpen","setIsLoginModalOpen","navigate","openLoginModal","closeLoginModal","handleLogout","confirmLogout","window","confirm","logout","triggerAuthChange","location","reload","handleLogin","loginData","user","logIn","className","children","FirstName_User","Id_Role","icon","onClick","onClose","onLogin"],"sources":["/usr/src/app/src/components/Header/Navbar.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './Header.css';\r\nimport { PrimaryButton } from '../common/PrimaryButton/PrimaryButton';\r\nimport { faRightToBracket } from \"@fortawesome/free-solid-svg-icons\";\r\nimport LoginModal from './LoginModal/LoginModal';\r\nimport UserService from '../../services/userService';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface NavbarProps {\r\n    isLoggedIn: boolean;\r\n    setIsLoggedIn: React.Dispatch<React.SetStateAction<boolean>>;\r\n    userInfo: any;\r\n    updateUserInfo: (user: any) => void; // Ajoutez cette fonction comme prop\r\n}\r\n\r\nconst Navbar: React.FC<NavbarProps> = ({ isLoggedIn, setIsLoggedIn, userInfo, updateUserInfo }) => {\r\n    const [isLoginModalOpen, setIsLoginModalOpen] = useState(false);\r\n\r\n    const navigate = useNavigate();\r\n    const openLoginModal = () => {\r\n        setIsLoginModalOpen(true);\r\n    };\r\n\r\n    const closeLoginModal = () => {\r\n        setIsLoginModalOpen(false);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        const confirmLogout = window.confirm(\"Êtes-vous sûr de vouloir vous déconnecter ?\");\r\n        if (confirmLogout) {\r\n            UserService.logout();\r\n            UserService.triggerAuthChange();\r\n        }\r\n        \r\n        navigate(\"/\");\r\n        window.location.reload();\r\n    };\r\n    \r\n    const handleLogin = async (loginData: any) => {\r\n        const user = await UserService.logIn(loginData);\r\n        if (user) {\r\n            updateUserInfo(user);\r\n            setIsLoggedIn(true);\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <nav className=\"navbar\">\r\n            <h1 className=\"navbar-title\">Ressources Relationelles</h1>\r\n            <ul className=\"nav-list\">\r\n                {isLoggedIn ? (\r\n                    <>\r\n                        {userInfo && (\r\n                            <li className=\"user-info\">\r\n                                Bonjour {userInfo.FirstName_User} {userInfo.Id_Role}\r\n                            </li>\r\n                        )}\r\n                        <li>\r\n                            <PrimaryButton icon={faRightToBracket} onClick={handleLogout}>Se déconnecter</PrimaryButton>\r\n                        </li>\r\n                    </>\r\n                ) : (\r\n                    <PrimaryButton icon={faRightToBracket} onClick={openLoginModal}>\r\n                        Se connecter\r\n                    </PrimaryButton>\r\n                )}\r\n            </ul>\r\n            {isLoginModalOpen && <LoginModal onClose={closeLoginModal} onLogin={handleLogin} />}\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,cAAc,CACrB,OAASC,aAAa,KAAQ,uCAAuC,CACrE,OAASC,gBAAgB,KAAQ,mCAAmC,CACpE,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,MAAO,CAAAC,WAAW,KAAM,4BAA4B,CACpD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAS/C,KAAM,CAAAC,MAA6B,CAAGC,IAAA,EAA6D,IAA5D,CAAEC,UAAU,CAAEC,aAAa,CAAEC,QAAQ,CAAEC,cAAe,CAAC,CAAAJ,IAAA,CAC1F,KAAM,CAACK,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE/D,KAAM,CAAAoB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAgB,cAAc,CAAGA,CAAA,GAAM,CACzBF,mBAAmB,CAAC,IAAI,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAG,eAAe,CAAGA,CAAA,GAAM,CAC1BH,mBAAmB,CAAC,KAAK,CAAC,CAC9B,CAAC,CAED,KAAM,CAAAI,YAAY,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,aAAa,CAAGC,MAAM,CAACC,OAAO,CAAC,6CAA6C,CAAC,CACnF,GAAIF,aAAa,CAAE,CACfpB,WAAW,CAACuB,MAAM,CAAC,CAAC,CACpBvB,WAAW,CAACwB,iBAAiB,CAAC,CAAC,CACnC,CAEAR,QAAQ,CAAC,GAAG,CAAC,CACbK,MAAM,CAACI,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAC,WAAW,CAAG,KAAO,CAAAC,SAAc,EAAK,CAC1C,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAA7B,WAAW,CAAC8B,KAAK,CAACF,SAAS,CAAC,CAC/C,GAAIC,IAAI,CAAE,CACNhB,cAAc,CAACgB,IAAI,CAAC,CACpBlB,aAAa,CAAC,IAAI,CAAC,CACvB,CACJ,CAAC,CAGD,mBACIN,KAAA,QAAK0B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACnB7B,IAAA,OAAI4B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,0BAAwB,CAAI,CAAC,cAC1D7B,IAAA,OAAI4B,SAAS,CAAC,UAAU,CAAAC,QAAA,CACnBtB,UAAU,cACPL,KAAA,CAAAE,SAAA,EAAAyB,QAAA,EACKpB,QAAQ,eACLP,KAAA,OAAI0B,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAC,UACd,CAACpB,QAAQ,CAACqB,cAAc,CAAC,GAAC,CAACrB,QAAQ,CAACsB,OAAO,EACnD,CACP,cACD/B,IAAA,OAAA6B,QAAA,cACI7B,IAAA,CAACN,aAAa,EAACsC,IAAI,CAAErC,gBAAiB,CAACsC,OAAO,CAAEjB,YAAa,CAAAa,QAAA,CAAC,mBAAc,CAAe,CAAC,CAC5F,CAAC,EACP,CAAC,cAEH7B,IAAA,CAACN,aAAa,EAACsC,IAAI,CAAErC,gBAAiB,CAACsC,OAAO,CAAEnB,cAAe,CAAAe,QAAA,CAAC,cAEhE,CAAe,CAClB,CACD,CAAC,CACJlB,gBAAgB,eAAIX,IAAA,CAACJ,UAAU,EAACsC,OAAO,CAAEnB,eAAgB,CAACoB,OAAO,CAAEX,WAAY,CAAE,CAAC,EAClF,CAAC,CAEd,CAAC,CAED,cAAe,CAAAnB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}